if(function(e){e.fn.animatedModal=function(t){function n(){l.css({"z-index":i.zIndexOut}),i.afterClose()}function r(){i.afterOpen()}var o=e(this),i=e.extend({modalTarget:"animatedModal",position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndexIn:"9999",zIndexOut:"-9999",color:"#39BEB9",opacityIn:"1",opacityOut:"0",animatedIn:"zoomIn",animatedOut:"zoomOut",animationDuration:".6s",overflow:"auto",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},t),s=e(".close-"+i.modalTarget),a=e(o).attr("href"),l=e("body").find("#"+i.modalTarget),d="#"+l.attr("id");l.addClass("animated"),l.addClass(i.modalTarget+"-off");var c={position:i.position,width:i.width,height:i.height,top:i.top,left:i.left,"background-color":i.color,"overflow-y":i.overflow,"z-index":i.zIndexOut,opacity:i.opacityOut,"-webkit-animation-duration":i.animationDuration};l.css(c),o.click(function(t){t.preventDefault(),e("body, html").css({overflow:"hidden"}),a==d&&(l.hasClass(i.modalTarget+"-off")&&(l.removeClass(i.animatedOut),l.removeClass(i.modalTarget+"-off"),l.addClass(i.modalTarget+"-on")),l.hasClass(i.modalTarget+"-on")&&(i.beforeOpen(),l.css({opacity:i.opacityIn,"z-index":i.zIndexIn}),l.addClass(i.animatedIn),l.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",r)))}),s.click(function(t){t.preventDefault(),e("body, html").css({overflow:"auto"}),i.beforeClose(),l.hasClass(i.modalTarget+"-on")&&(l.removeClass(i.modalTarget+"-on"),l.addClass(i.modalTarget+"-off")),l.hasClass(i.modalTarget+"-off")&&(l.removeClass(i.animatedIn),l.addClass(i.animatedOut),l.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",n))})}}(jQuery),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function t(o,s,c,p){function f(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",$.component.nodes(w.open),v.box),v.wrap),v.frame),v.holder,'tabindex="-1"')}function u(){$.$holder.on({keydown:g,"focus.toOpen":m,blur:function(){k.removeClass(v.target)},focusin:function(e){$.$root.removeClass(v.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=$.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is("input, select, textarea, button, option")||(t.preventDefault(),$.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),n=t.data(),r=t.hasClass(v.navDisabled)||t.hasClass(v.disabled),o=i();o=o&&(o.type||o.href),(r||o&&!e.contains($.$root[0],o))&&$.$holder[0].focus(),!r&&n.nav?$.set("highlight",$.component.item.highlight,{nav:n.nav}):!r&&"pick"in n?($.set("select",n.pick),y.closeOnSelect&&$.close(!0)):n.clear?($.clear(),y.closeOnClear&&$.close(!0)):n.close&&$.close(!0)})}function m(e){e.stopPropagation(),k.addClass(v.target),$.$root.addClass(v.focused),$.open()}function g(e){var t=e.keyCode,n=/^(8|46)$/.test(t);return 27==t?($.close(!0),!1):void((32==t||n||!w.open&&$.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?$.clear().close():$.open()))}if(!o)return t;var h=!1,w={id:o.id||"P"+Math.abs(~~(Math.random()*new Date))},y=c?e.extend(!0,{},c.defaults,p):p||{},v=e.extend({},t.klasses(),y.klass),k=e(o),b=function(){return this.start()},$=b.prototype={constructor:b,$node:k,start:function(){return w&&w.start?$:(w.methods={},w.start=!0,w.open=!1,w.type=o.type,o.autofocus=o==i(),o.readOnly=!y.editable,o.id=o.id||w.id,"text"!=o.type&&(o.type="text"),$.component=new c($,y),$.$root=e('<div class="'+v.picker+'" id="'+o.id+'_root" />'),r($.$root[0],"hidden",!0),$.$holder=e(f()).appendTo($.$root),u(),y.formatSubmit&&(!0===y.hiddenName?(t=o.name,o.name=""):t=(t=["string"==typeof y.hiddenPrefix?y.hiddenPrefix:"","string"==typeof y.hiddenSuffix?y.hiddenSuffix:"_submit"])[0]+o.name+t[1],$._hidden=e('<input type=hidden name="'+t+'"'+(k.data("value")||o.value?' value="'+$.get("select",y.formatSubmit)+'"':"")+">")[0],k.on("change."+w.id,function(){$._hidden.value=o.value?$.get("select",y.formatSubmit):""})),k.data(s,$).addClass(v.input).val(k.data("value")?$.get("select",y.format):o.value),y.editable||k.on("focus."+w.id+" click."+w.id,function(e){e.preventDefault(),$.open()}).on("keydown."+w.id,g),r(o,{haspopup:!0,expanded:!1,readonly:!1,owns:o.id+"_root"}),y.containerHidden?e(y.containerHidden).append($._hidden):k.after($._hidden),y.container?e(y.container).append($.$root):k.after($.$root),$.on({start:$.component.onStart,render:$.component.onRender,stop:$.component.onStop,open:$.component.onOpen,close:$.component.onClose,set:$.component.onSet}).on({start:y.onStart,render:y.onRender,stop:y.onStop,open:y.onOpen,close:y.onClose,set:y.onSet}),h=function(e){var t,n="position";return e.currentStyle?t=e.currentStyle[n]:window.getComputedStyle&&(t=getComputedStyle(e)[n]),"fixed"==t}($.$holder[0]),o.autofocus&&$.open(),$.trigger("start").trigger("render"));var t},render:function(t){return t?($.$holder=e(f()),u(),$.$root.html($.$holder)):$.$root.find("."+v.box).html($.component.nodes(w.open)),$.trigger("render")},stop:function(){return w.start?($.close(),$._hidden&&$._hidden.parentNode.removeChild($._hidden),$.$root.remove(),k.removeClass(v.input).removeData(s),setTimeout(function(){k.off("."+w.id)},0),o.type=w.type,o.readOnly=!1,$.trigger("stop"),w.methods={},w.start=!1,$):$},open:function(i){return w.open?$:(k.addClass(v.active),r(o,"expanded",!0),setTimeout(function(){$.$root.addClass(v.opened),r($.$root[0],"hidden",!1)},0),!1!==i&&(w.open=!0,h&&l.css("overflow","hidden").css("padding-right","+="+n()),h&&d?$.$holder.find("."+v.frame).one("transitionend",function(){$.$holder[0].focus()}):$.$holder[0].focus(),a.on("click."+w.id+" focusin."+w.id,function(e){var t=e.target;t!=o&&t!=document&&3!=e.which&&$.close(t===$.$holder[0])}).on("keydown."+w.id,function(n){var r=n.keyCode,o=$.component.key[r],i=n.target;27==r?$.close(!0):i!=$.$holder[0]||!o&&13!=r?e.contains($.$root[0],i)&&13==r&&(n.preventDefault(),i.click()):(n.preventDefault(),o?t._.trigger($.component.key.go,$,[t._.trigger(o)]):$.$root.find("."+v.highlighted).hasClass(v.disabled)||($.set("select",$.component.item.highlight),y.closeOnSelect&&$.close(!0)))})),$.trigger("open"))},close:function(e){return e&&(y.editable?o.focus():($.$holder.off("focus.toOpen").focus(),setTimeout(function(){$.$holder.on("focus.toOpen",m)},0))),k.removeClass(v.active),r(o,"expanded",!1),setTimeout(function(){$.$root.removeClass(v.opened+" "+v.focused),r($.$root[0],"hidden",!0)},0),w.open?(w.open=!1,h&&l.css("overflow","").css("padding-right","-="+n()),a.off("."+w.id),$.trigger("close")):$},clear:function(e){return $.set("clear",null,e)},set:function(t,n,r){var o,i,s=e.isPlainObject(t),a=s?t:{};if(r=s&&e.isPlainObject(n)?n:r||{},t){for(o in s||(a[t]=n),a)i=a[o],o in $.component.item&&(void 0===i&&(i=null),$.component.set(o,i,r)),("select"==o||"clear"==o)&&k.val("clear"==o?"":$.get(o,y.format)).trigger("change");$.render()}return r.muted?$:$.trigger("set",a)},get:function(e,n){if(null!=w[e=e||"value"])return w[e];if("valueSubmit"==e){if($._hidden)return $._hidden.value;e="value"}if("value"==e)return o.value;if(e in $.component.item){if("string"==typeof n){var r=$.component.get(e);return r?t._.trigger($.component.formats.toString,$.component,[n,r]):""}return $.component.get(e)}},on:function(t,n,r){var o,i,s=e.isPlainObject(t),a=s?t:{};if(t)for(o in s||(a[t]=n),a)i=a[o],r&&(o="_"+o),w.methods[o]=w.methods[o]||[],w.methods[o].push(i);return $},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in w.methods&&delete w.methods[t];return $},trigger:function(e,n){var r=function(e){var r=w.methods[e];r&&r.map(function(e){t._.trigger(e,$,[n])})};return r("_"+e),r(e),$}};return new b}function n(){if(l.height()<=s.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var r=e('<div style="width:100%" />').appendTo(t)[0].offsetWidth;return t.remove(),n-r}function r(t,n,r){if(e.isPlainObject(n))for(var i in n)o(t,i,n[i]);else o(t,n,r)}function o(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function i(){try{return document.activeElement}catch(e){}}var s=e(window),a=e(document),l=e(document.documentElement),d=null!=document.documentElement.style.transition;return t.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,r="",o=t._.trigger(e.min,e);o<=t._.trigger(e.max,e,[o]);o+=e.i)n=t._.trigger(e.item,e,[o]),r+=t._.node(e.node,n[0],n[1],n[2]);return r},node:function(t,n,r,o){return n?"<"+t+(r=r?' class="'+r+'"':"")+(o=o?" "+o:"")+">"+(n=e.isArray(n)?n.join(""):n)+"</"+t+">":""},lead:function(e){return(10>e?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:function(t,n){for(var r in e.isPlainObject(t)||(t={attribute:n}),n="",t){var o=("role"==r?"":"aria-")+r;n+=null==t[r]?"":o+'="'+t[r]+'"'}return n}},t.extend=function(n,r){e.fn[n]=function(o,i){var s=this.data(n);return"picker"==o?s:s&&"string"==typeof o?t._.trigger(s[o],s,[i]):this.each(function(){e(this).data(n)||new t(this,n,r,o)})},e.fn[n].defaults=r.defaults},t}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function n(e,t){var n=this,r=e.$node[0],o=r.value,i=e.$node.data("value"),s=i||o,a=i?t.formatSubmit:t.format,l=function(){return r.currentStyle?"rtl"==r.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),s?n.set("select",s,{format:a,defaultValue:!0}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=n.item.highlight,r=new Date(t.year,t.month,t.date+e);n.set("highlight",r,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var r="";n.disabled(n.get("now"))&&(r=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+r+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var r=e._;n.prototype.set=function(e,t,n){var r=this,o=r.item;return null===t?("clear"==e&&(e="select"),o[e]=t,r):(o["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(o){return t=r[o](e,t,n)}).pop(),"select"==e?r.set("highlight",o.select,n):"highlight"==e?r.set("view",o.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(o.select&&r.disabled(o.select)&&r.set("select",o.select,n),o.highlight&&r.disabled(o.highlight)&&r.set("highlight",o.highlight,n)),r)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,o){var i,s=this;return(n=void 0===n?e:n)==-1/0||n==1/0?i=n:t.isPlainObject(n)&&r.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=r.isDate(n)?n:s.create().obj):n=r.isInteger(n)||r.isDate(n)?s.normalize(new Date(n),o):s.now(e,n,o),{year:i||n.getFullYear(),month:i||n.getMonth(),date:i||n.getDate(),day:i||n.getDay(),obj:i||n,pick:i||n.getTime()}},n.prototype.createRange=function(e,n){var o=this,i=function(e){return!0===e||t.isArray(e)||r.isDate(e)?o.create(e):e};return r.isInteger(e)||(e=i(e)),r.isInteger(n)||(n=i(n)),r.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:r.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:i(e),to:i(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,r){var o,i,s,a,l=t.isArray(n),d=t.isPlainObject(n),c=this.item.view;if(l||d){for(d?(i=n.year,s=n.month,a=n.date):(i=+n[0],s=+n[1],a=+n[2]),r&&r.nav&&c&&c.month!==s&&(i=c.year,s=c.month),i=(o=new Date(i,s+(r&&r.nav?r.nav:0),1)).getFullYear(),s=o.getMonth();new Date(i,s,a).getMonth()!==s;)a-=1;n=[i,s,a]}return n},n.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},n.prototype.measure=function(e,t){return t?"string"==typeof t?t=this.parse(e,t):r.isInteger(t)&&(t=this.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,o){var i,s,a,l,d=this,c=n,p=o&&o.interval?o.interval:1,f=-1===d.item.enable,u=d.item.min,m=d.item.max,g=f&&d.item.disable.filter(function(e){if(t.isArray(e)){var o=d.create(e).pick;o<n.pick?i=!0:o>n.pick&&(s=!0)}return r.isInteger(e)}).length;if((!o||!o.nav&&!o.defaultValue)&&(!f&&d.disabled(n)||f&&d.disabled(n)&&(g||i||s)||!f&&(n.pick<=u.pick||n.pick>=m.pick)))for(f&&!g&&(!s&&p>0||!i&&0>p)&&(p*=-1);d.disabled(n)&&(Math.abs(p)>1&&(n.month<c.month||n.month>c.month)&&(n=c,p=p>0?1:-1),n.pick<=u.pick?(a=!0,p=1,n=d.create([u.year,u.month,u.date+(n.pick===u.pick?0:-1)])):n.pick>=m.pick&&(l=!0,p=-1,n=d.create([m.year,m.month,m.date+(n.pick===m.pick?0:1)])),!a||!l);)n=d.create([n.year,n.month,n.date+p]);return n},n.prototype.disabled=function(e){var n=this,o=n.item.disable.filter(function(o){return r.isInteger(o)?e.day===(n.settings.firstDay?o:o-1)%7:t.isArray(o)||r.isDate(o)?e.pick===n.create(o).pick:t.isPlainObject(o)?n.withinRange(o,e):void 0});return o=o.length&&!o.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!o:o||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var o=this,i={};return t&&"string"==typeof t?(n&&n.format||((n=n||{}).format=o.settings.format),o.formats.toArray(n.format).map(function(e){var n=o.formats[e],s=n?r.trigger(n,o,[t,i]):e.replace(/^!/,"").length;n&&(i[e]=t.substr(0,s)),t=t.substr(s)}),[i.yyyy||i.yy,+(i.mm||i.m)-1,i.dd||i.d]):t},n.prototype.formats=function(){function e(e,t,n){var r=e.match(/[^\x00-\x7F]+|\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(r)+1),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?r.digits(e):t.date},dd:function(e,t){return e?2:r.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?r.digits(e):t.month+1},mm:function(e,t){return e?2:r.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return r.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(e,n){var o=this;return r.isInteger(e)&&r.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(r.isDate(e)||t.isArray(e))&&(r.isDate(n)||t.isArray(n))?o.create(e).pick===o.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(o.isDateExact(e.from,n.from)&&o.isDateExact(e.to,n.to))},n.prototype.isDateOverlap=function(e,n){var o=this,i=o.settings.firstDay?1:0;return r.isInteger(e)&&(r.isDate(n)||t.isArray(n))?(e=e%7+i)===o.create(n).day+1:r.isInteger(n)&&(r.isDate(e)||t.isArray(e))?(n=n%7+i)===o.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&o.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var o=this,i=o.item.disable.slice(0);return"flip"==n?o.flipEnable():!1===n?(o.flipEnable(1),i=[]):!0===n?(o.flipEnable(-1),i=[]):n.map(function(e){for(var n,s=0;s<i.length;s+=1)if(o.isDateExact(e,i[s])){n=!0;break}n||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&i.push(e)}),i},n.prototype.activate=function(e,n){var o=this,i=o.item.disable,s=i.length;return"flip"==n?o.flipEnable():!0===n?(o.flipEnable(1),i=[]):!1===n?(o.flipEnable(-1),i=[]):n.map(function(e){var n,a,l,d;for(l=0;s>l;l+=1){if(a=i[l],o.isDateExact(a,e)){n=i[l]=null,d=!0;break}if(o.isDateOverlap(a,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e)[3]||n.push("inverted"):r.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(l=0;s>l;l+=1)if(o.isDateExact(i[l],e)){i[l]=null;break}if(d)for(l=0;s>l;l+=1)if(o.isDateOverlap(i[l],e)){i[l]=null;break}n&&i.push(n)}),i.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,o=t.item,i=o.now,s=o.select,a=o.highlight,l=o.view,d=o.disable,c=o.min,p=o.max,f=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),r.node("thead",r.node("tr",r.group({min:0,max:6,i:1,node:"th",item:function(r){return[e[r],n.klass.weekdays,'scope=col title="'+t[r]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysShort).slice(0),n.weekdaysFull.slice(0)),u=function(e){return r.node("div"," ",n.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=p.year&&l.month>=p.month||!e&&l.year<=c.year&&l.month<=c.month?" "+n.klass.navDisabled:""),"data-nav="+(e||-1)+" "+r.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},m=function(){var o=n.showMonthsShort?n.monthsShort:n.monthsFull;return n.selectMonths?r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(e){return[o[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==c.year&&e<c.month||l.year==p.year&&e>p.month?" disabled":"")]}}),n.klass.selectMonth,(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):r.node("div",o[l.month],n.klass.month)},g=function(){var o=l.year,i=!0===n.selectYears?5:~~(n.selectYears/2);if(i){var s=c.year,a=p.year,d=o-i,f=o+i;if(s>d&&(f+=s-d,d=s),f>a){var u=d-s,m=f-a;d-=u>m?m:u,f=a}return r.node("select",r.group({min:d,max:f,i:1,node:"option",item:function(e){return[e,0,"value="+e+(o==e?" selected":"")]}}),n.klass.selectYear,(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return r.node("div",o,n.klass.year)};return r.node("div",(n.selectYears?g()+m():m()+g())+u()+u(1),n.klass.header)+r.node("table",f+r.node("tbody",r.group({min:0,max:5,i:1,node:"tr",item:function(e){var o=n.firstDay&&0===t.create([l.year,l.month,1]).day?-7:0;return[r.group({min:7*e-l.day+o+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(n.firstDay?1:0)]);var o=s&&s.pick==e.pick,f=a&&a.pick==e.pick,u=d&&t.disabled(e)||e.pick<c.pick||e.pick>p.pick,m=r.trigger(t.formats.toString,t,[n.format,e]);return[r.node("div",e.date,function(t){return t.push(l.month==e.month?n.klass.infocus:n.klass.outfocus),i.pick==e.pick&&t.push(n.klass.now),o&&t.push(n.klass.selected),f&&t.push(n.klass.highlighted),u&&t.push(n.klass.disabled),t.join(" ")}([n.klass.day]),"data-pick="+e.pick+" "+r.ariaAttr({role:"gridcell",label:m,selected:!(!o||t.$node.val()!==m)||null,activedescendant:!!f||null,disabled:!!u||null})),"",r.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+r.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0}))+r.node("div",r.node("button",n.today,n.klass.buttonToday,"type=button data-pick="+i.pick+(e&&!t.disabled(i)?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",n.close,n.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),n.klass.footer)},n.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",n)}),"undefined"==typeof authoringMode)var clientURL="";function enterSite(e){initPickadateLocalization(),this.signup=$.getURLvar("signup"),this.activated=$.getURLvar("activated"),this.pwdrst=$.getURLvar("pwdrst"),this.registerNow=$.getURLvar("msg"),this.courseRegister=!1,this.signup=this.signup?this.signup.replace("#_","").replace("#!","").replace("#",""):this.signup,this.waitForRegister=!1,this.elsID={socIconFb:"socIconFb",socIconTwit:"socIconTwit",socIconLinkedin:"socIconLinkedin",socIconGoogle:"socIconGoogle",socIconApple:"socIconApple",socIconLearnworldsAccount:"socIconLW",enterOnlyBG:"registerBackground"},this.$els={loginBtn:$("#submitLogin"),updateMyImg:$(".-click-image-text"),waitingWrapper:$("#waitingWrapper")},this.$forms={signInForm:$(".login-form"),signUpForm:$("#signUpForm"),askInvitation:$("#askInvitationForm"),resetPasswordInit:$("#passwordResetInitForm"),resetPassword:$("#passwordResetForm")},this.cssClass={avatar:"-form-avatar",avatarBtn:"-form-avatar-btn",avatarClickTxt:"-avatar-click-text",signInBtns:"sign-input",loginFormWrapper:"login-form-wrapper",loginOnlyForm:"not-logged-in",loginOnlyBG:"lnd-temp-2-19",loginOnlyHide:"login-hide",createAccountBtn:"-create-account",forgotPasswordBtn:"-forgot-pass",signupBtn:"signup-btn",resetPasswordBtn:"reset-pass-btn",resetPasswordFormBtn:"reset-pass-final-btn",signInLinks:"js-signInLinks",siteName:"js-siteName",formsWithEnter:"js-form-enterkey"},this.ajax={sign_in:"signin",sign_up:"users",invite_request:"invitation-requests",upload_avatar:"file/avatars",password_reset_init:"password-reset-init",password_reset:"password-reset"},this.registerInCourse=window.l_settings&&window.l_settings.courseRegister&&window.l_settings.registerInCourse}function getAnonymousTokenFromLocalStorage(){try{return window.localStorage&&window.localStorage.getItem("anonymous_token")?JSON.parse(localStorage.getItem("anonymous_token")).token:null}catch(e){return console.error("Error getting anonymous token from local storage"),null}}enterSite.prototype={initInterface:function(){var e=this;if(void 0!==window.USER_CUSTOM_FIELDS){for(var t=$("#userCustomField"),n="",r=0;r<window.USER_CUSTOM_FIELDS.length;r++){var o=window.USER_CUSTOM_FIELDS[r];o.active&&(n+=t.render(o))}this.$forms.signUpForm.find(".js-extraLogin_terms").length>0?$(n).insertBefore(this.$forms.signUpForm.find(".js-extraLogin_terms")):this.$forms.signUpForm.find(".-form-inputs").append(n)}if(window.ACTIVE_SITE_TEMPLATE&&window.LOGIN_FORM_TEMPLATE){if(window.LOGIN_FORM_IMAGE){var i=$(".js-login-form-image");i.length&&i.each(function(e,t){$(t).attr("style","background-image:url('"+window.serverImg+window.LOGIN_FORM_IMAGE+"')")})}if(window.SCHOOL_LOGO){var s=$(".js-login-form-school-logo");s.length&&s.each(function(e,t){$(t).attr("src",window.serverImg+window.SCHOOL_LOGO)})}}if("undefined"==typeof SOCIAL_LOGINS||$.getURLvar("email"))$.getURLvar("email")&&$(".-form-social-buttons").hide().next().hide();else{$(".-form-social-buttons").children().hide(),$(".-form-social-buttons").addClass("-form-social-buttons-count-"+SOCIAL_LOGINS.length);for(r=0;r<SOCIAL_LOGINS.length;r++)"facebook"==SOCIAL_LOGINS[r]&&$(".-fb-form-button").show(),"twitter"==SOCIAL_LOGINS[r]&&$(".-twit-form-button").show(),"linkedin"==SOCIAL_LOGINS[r]&&$(".-linkedin-form-button").show(),"google"==SOCIAL_LOGINS[r]&&$(".-google-form-button").show(),"apple"==SOCIAL_LOGINS[r]&&$(".-apple-form-button").show();0!=SOCIAL_LOGINS.length&&""!=SOCIAL_LOGINS[0]||$(".-form-social-buttons").hide().next().hide()}$("#submitLogin").off("click").on("click",function(){$(this).nowLoading(),e.signin()});var a=this.$forms.signInForm.clone(),l=$("#lndTemplates").find("*");if($("body").find("."+this.cssClass.loginFormWrapper).not(l).length>0&&0==$(".login-form-wrapper :last").find(".login-form").length&&($(".login-form-wrapper :last").append(a),a.find("[id=submitLogin]").removeAttr("id").addClass("js-form-login-btn"),a.show(),a.find("."+this.cssClass.signInBtns).off("keyup.clearFormErrors").on("keyup.clearFormErrors",function(e){a.find(".js-signin-error-msg").is(":visible")&&a.find(".js-signin-error-msg").hide()}),$(".login-form-wrapper :last").addClass("js-removeOnSave")),a.find(".js-form-login-btn").off("click").on("click",function(){$(this).nowLoading(),e.formSignIn()}),$("."+this.cssClass.createAccountBtn).off("click tap").on("click tap",function(){e.signup="learnworlds",e.showRegisterForm()}),$("."+this.cssClass.forgotPasswordBtn).off("click").on("click",function(){e.showPasswordResetForm()}),$("."+this.cssClass.resetPasswordFormBtn).off("click").on("click",function(){e.passwordReset()}),$("."+this.cssClass.avatar).off("click").on("click",function(){$("."+e.cssClass.avatarBtn).click()}),$("."+this.cssClass.signupBtn).off("click").on("click",function(){$(this).nowLoading(),e.register()}),$("."+this.cssClass.resetPasswordBtn).off("click").on("click",function(){$(this).nowLoading(),e.passwordResetInit()}),$(".js-new-pass-input").off("keyup.clearErrors").on("keyup.clearErrors",function(e){$(this).parents(".js-form-enterkey").find(".js-new-pass-error-wrapper").length&&$(this).parents(".js-form-enterkey").find(".js-new-pass-error-wrapper").remove()}),$(".js-signin-input").off("keyup.clearErrors").on("keyup.clearErrors",function(e){$(this).parents(".js-form-enterkey").find(".js-signin-error-wrapper").length&&$(this).parents(".js-form-enterkey").find(".js-signin-error-wrapper").remove(),$(this).parents(".js-form-enterkey").find(".js-original-signin-error-wrapper").length&&$(this).parents(".js-form-enterkey").find(".js-original-signin-error-wrapper").hide()}),$(".js-reset-pass-input").off("keyup.clearErrors").on("keyup.clearErrors",function(e){$(this).parents(".js-form-enterkey").find(".js-reset-pass-error-wrapper").length&&$(this).parents(".js-form-enterkey").find(".js-reset-pass-error-wrapper").remove()}),$("."+this.cssClass.signInLinks).off("click").on("click",function(){e.showEnterOnlyForm()}),$("."+this.cssClass.siteName).text(SITENAME),$("."+this.cssClass.formsWithEnter).off("keypress").on("keypress",function(e){13==e.keyCode&&$(this).find(".js-enterFocus").focus().click()}),"undefined"!=typeof WHITELABEL&&WHITELABEL){$(".js-whiteLabel").remove(),$(".-created-lw").prev().remove(),$(".-created-lw").remove();var d=$(".-created-lw-icon").parent();d.prev().remove(),d.remove()}},enterStatus:function(){var e=this;(this.signup&&("facebook"==this.signup||"twitter"==this.signup||"linkedin"==this.signup)||"learnworlds_account"==this.signup||"google"==this.signup||"apple"==this.signup)&&this.showRegisterForm(),this.activated&&showAnimatedMessage("ok",LWTranslate.get("common.signup_welcome")),this.pwdrst&&window.setTimeout(function(){e.$forms.resetPassword.find(".js-new-pass-error-msg").hide(),showAnimatedModal(l_settings.$forms.resetPassword,SCREENFORMS_COLOR)},100),this.registerNow&&"not-logged-in"==this.registerNow&&window.setTimeout(function(){l_settings.showEnterOnlyForm()},100),this.registerNow&&"signup"==this.registerNow&&window.setTimeout(function(){l_settings.signup="learnworlds",l_settings.showRegisterForm()},100),this.registerNow&&"resetpassword"==this.registerNow&&window.setTimeout(function(){l_settings.showPasswordResetForm()},100);for(var t=window.localStorage,n=$.getURLvars(),r=0;r<n.length;r++)try{this.$forms.signUpForm.find("input[name="+n[r]+"]").length&&void 0!==t&&t.setItem("prefillInput_"+n[r],n[n[r]])}catch(e){}},showEnterOnlyForm:function(){var e=this;if(!window.checkAndRedirectForSSO("login")){if(window.SITE_DISABLE_SIGNUP){var t=$(".login-form-title-signup");t.length&&t.remove()}$(".js-signin-error-wrapper").length&&$(".js-signin-error-wrapper").remove(),showAnimatedModal(this.$forms.signInForm,SCREENFORMS_COLOR),isMobile("app")&&window.pageRenderObj.checkMobileAppSettings($("#animatedModal")),this.courseRegister&&$(".-form-social-buttons").find("a").each(function(t,n){var r=window.location.href.indexOf("?")>-1?"&register=true":"?register=true",o=$(n).attr("href")+"?redirectUrl="+encodeURIComponent(window.location.href+r);e.registerInCourse&&(o+="&registerInCourse="+encodeURIComponent(e.registerInCourse)),$(n).attr("href",o)}),l_settings.socialRedirect&&$(".-form-social-buttons").find("a").each(function(e,t){var n=$(t).attr("href")+"?redirectUrl="+encodeURIComponent(l_settings.socialRedirect);$(t).attr("href",n)})}},showInvRequestForm:function(){showAnimatedModal(this.$forms.askInvitation,SCREENFORMS_COLOR)},showPasswordResetForm:function(){window.checkAndRedirectForSSO("passwordreset")||($(".js-reset-pass-error-wrapper").length&&$(".js-reset-pass-error-wrapper").remove(),showAnimatedModal(this.$forms.resetPasswordInit,SCREENFORMS_COLOR))},invRequest:function(){var e=this.$forms.askInvitation,t={email:e.find("input[name=email]").val()};clearFormError(e.find("input[name=email]"));var n=server+this.ajax.invite_request;$.ajax({url:n,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(t)),success:function(t){t.success?(closeAnimatedModal(),showMessage("Alert","Thanks!","You'll become our member soon enough.",[{name:"OK"}])):$.isArray(t.errors)&&$.each(t.errors,function(t,n){formError(e.find("input[name="+n.context+"]"),n.message)})},error:function(){displayError()}})},showRegisterForm:function(){var e=this.signup;if(!(e&&"learnworlds_account"!==e&&"undefined"==typeof registerData&&window.checkAndRedirectForSSO("signup")||"all"===window.SITE_DISABLE_SIGNUP)){var t=this.$forms.signUpForm,n=void 0!==window.registrationMinAge?window.registrationMinAge:14,r=new Date((new Date).setFullYear((new Date).getFullYear()-n));t.find(".social-icon").addClass(e),t.find("input[name=birthday]").pickadate({format:"yyyy-mm-dd",selectMonths:!0,max:r,selectYears:100,onClose:function(){$(".picker__holder").trigger("blur")}}),t.find(".js-custom-form-input-date").pickadate({format:"yyyy-mm-dd",selectMonths:!0,selectYears:100,onClose:function(){$(".picker__holder").trigger("blur")}}),t.find(".js-custom-form-input-dropdown").on("change",function(e){var t=$(e.target);t.toggleClass("lw-custom-field-placeholder-selected",!t.val())});var o=t.find(".js-extraLogin_profession");o.length>0&&(o.find("option:disabled").attr("data-lang",LWTranslate.locale),o.find('option[data-lang!="'+LWTranslate.locale+'"]').remove());var i=window.localStorage;if(void 0!==i&&i.length)for(var s=0,a=i.length;s<a;++s)if(-1!=i.key(s).indexOf("prefillInput")){var l=i.key(s).split("_").pop();this.$forms.signUpForm.find("input[name="+l+"]").val(i.getItem(i.key(s)))}var d=$.getURLvars();for(s=0;s<d.length;s++)try{var c=this.$forms.signUpForm.find("input[name="+d[s]+"]");c.length&&c.val(d[d[s]])}catch(e){}if(showAnimatedModal(this.$forms.signUpForm,SCREENFORMS_COLOR),"learnworlds"==e)t.find("#"+this.elsID.socIconTwit+", #"+this.elsID.socIconFb+", #"+this.elsID.socIconLinkedin+", #"+this.elsID.socIconGoogle+", #"+this.elsID.socIconApple+",  #"+this.elsID.socIconLearnworldsAccount).hide(),t.find("input[type=password]").parent().show(),0!=SOCIAL_LOGINS.length&&""!=SOCIAL_LOGINS[0]&&t.find(".-form-social-buttons").show().next().show(),registerData={type:"learnworlds",avatar:imagePath+"/images/empty-avatar.jpg"};else{if("undefined"==typeof registerData||e!=registerData.type)return void closeAnimatedModal();t.find("input[name=username]").val(registerData.username),t.find("input[name=email]").val(registerData.email),"learnworlds_account"===e&&t.find("input[name=email]").parent().hide(),"facebook"==e?$("#"+this.elsID.socIconFb).show():$("#"+this.elsID.socIconFb).hide(),"twitter"==e?$("#"+this.elsID.socIconTwit).show():$("#"+this.elsID.socIconTwit).hide(),"linkedin"==e?$("#"+this.elsID.socIconLinkedin).show():$("#"+this.elsID.socIconLinkedin).hide(),"google"==e?$("#"+this.elsID.socIconGoogle).show():$("#"+this.elsID.socIconGoogle).hide(),"apple"==e?$("#"+this.elsID.socIconApple).show():$("#"+this.elsID.socIconApple).hide(),"learnworlds_account"==e?$("#"+this.elsID.socIconLearnworldsAccount).show():$("#"+this.elsID.socIconLearnworldsAccount).hide(),t.find("input[type=password]").parent().hide(),t.find(".-form-social-buttons").hide().next().hide()}t.find("."+this.cssClass.avatar).css("backgroundImage",'url("'+registerData.avatar+'")').data("avatar",registerData.avatar);var p=t.find(".js-extraLogin_terms").find("a");p.off("click").on("click",function(e){e.preventDefault()}),p.fancybox({type:"iframe",fitToView:!1,autoSize:!1,autoDimensions:!1,height:"80%",href:"/pages/terms",afterLoad:function(e){var t=$("body",$(".fancybox-iframe").contents()).find("#pageWrapper").clone();t.length>0?($("body",$(".fancybox-iframe").contents()).find("*").remove(),$("body",$(".fancybox-iframe").contents()).append(t)):(t=$("body",$(".fancybox-iframe").contents()).find("#pageContent")).find(".lw-topbar, .lw-footer").hide()}})}},register:function(){var e=this;if(!this.waitForRegister){this.waitForRegister=!0;var t=this.$forms.signUpForm,n={};t.find("input:visible").each(function(e,t){n[$(t).attr("name")]=$(t).val()}),n.email=t.find("input[name=email]").val();var r=$(".js-extraLogin_terms:visible"),o=t.find(".js-extraLogin_optin:visible");r.length>0&&(n.terms=r.find("[name=terms]").prop("checked")),o.length>0&&(n.optin=o.find("[name=optin]").prop("checked"));var i=t.find(".js-extraLogin_company_size:visible");i.length>0&&(n.company_size=i.find("option:selected").val());var s=t.find(".js-extraLogin_profession:visible");s.length>0&&(n.profession=s.find("option:selected").val());var a=t.find(".js-extraLogin_country_dropdown:visible");a.length>0&&(n.country_dropdown=a.find("option:selected").val());var l=[];n.custom_fields={};for(var d=0;d<window.USER_CUSTOM_FIELDS.length;d++){var c=window.USER_CUSTOM_FIELDS[d];if(c.active){var p=$(".js-extraLogin_"+c.key+":visible");"text"==c.type||"date"==c.type?n.custom_fields[c.key]=p.find('input[type="text"]').last().val():"dropdown"==c.type?n.custom_fields[c.key]=p.find("option:selected").last().val():"radio"==c.type?n.custom_fields[c.key]=p.find('input[type="radio"]:checked').last().val():"checkbox"==c.type&&(n.custom_fields[c.key]=p.find('input[type="checkbox"]').last().is(":checked")),l.push(c.key)}}n.avatar=t.find("."+e.cssClass.avatar).data("avatar"),"learnworlds"==registerData.type?n.account={type:registerData.type}:"learnworlds_account"==registerData.type?n.account={type:registerData.type,id:registerData.id,username:registerData.username,academy_premium_courses:registerData.academy_premium_courses}:n.account={type:registerData.type,id:registerData.id,username:registerData.username},registerData.twitter&&(n.twitter=registerData.twitter),registerData.fb&&(n.fb=registerData.fb),registerData.linkedin&&(n.linkedin=registerData.linkedin),registerData.location&&(n.location=registerData.location),registerData.bio&&(n.bio=registerData.bio),clearFormError(t.find("input[name=username]")),clearFormError(t.find("input[name=email]")),clearFormError(t.find("input[name=invitation]")),clearFormError(t.find("input[name=password]")),clearFormError(t.find("input[name=phone]")),clearFormError(t.find("input[name=address]")),clearFormError(t.find("input[name=country]")),clearFormError(t.find("select[name=country_dropdown]")),clearFormError(t.find("input[name=birthday]")),clearFormError(t.find("input[name=company]")),clearFormError(t.find("input[name=url]")),clearFormError(t.find("input[name=university]")),clearFormError(t.find("input[name=graduation_date]")),clearFormError(t.find("input[name=terms]")),clearFormError(t.find("select[name=company_size]")),clearFormError(t.find("select[name=profession]"));for(d=0;d<l.length;d++)clearFormError(t.find("[name=extralogin-"+l[d]+"]"));void 0!==window.dpModalRenderer&&window.dpModalRenderer.userSelectedCookieSettings()&&(n.data_protection_cookie_settings=window.dpModalRenderer.getCookieSettings()),"undefined"!=typeof DP_EU&&(n.eu_customer=DP_EU),$.getURLvar("tag")&&(n.tags=[$.getURLvar("tag")]),this.registerInCourse&&(n.registerInCourse=this.registerInCourse),t.find("form-but").off("click"),$("."+this.cssClass.signupBtn).addClass("loadingButton");var f=server+this.ajax.sign_up,u=getAnonymousTokenFromLocalStorage();$.ajax({url:f,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(n)),headers:{"Anonymous-Token":u},success:function(r){if($("."+e.cssClass.signupBtn).nowLoading("stop"),r.success||r.user)if("learnworlds"==registerData.type){if(e.courseRegister){var o=window.location.href.indexOf("?")>-1?"&register=true":"?register=true";return void(window.location.href=window.location.href+o)}r.activated?showAnimatedMessage("ok",LWTranslate.get("common.welcome")):l_settings.redirectUrl?window.location.replace(l_settings.redirectUrl):r.loggedin?window.location.replace(clientURL+"/"+(r.redirect?r.redirect:"")):r.redirectUrl&&r.shopify?e.shopifyLogin(n.email,n.password,function(){e.$els.loginBtn.nowLoading("stop"),window.location.replace(r.redirectUrl)}):r.redirectUrl?window.location.replace(r.redirectUrl):showAnimatedMessage("ok",LWTranslate.get("common.welcome")),$("."+e.cssClass.signupBtn).removeClass("loadingButton")}else window.location.replace(clientURL+"/signin/"+registerData.type);else $.isArray(r.errors)&&($.each(r.errors,function(e,n){var r="input[name="+n.context+"]";"company_size"==n.context||"profession"==n.context||"country_dropdown"==n.context?r="select[name="+n.context+"]":l.indexOf(n.context)>-1&&(r="[name=extralogin-"+n.context+"]"),formError(t.find(r),n.message)}),$("."+e.cssClass.signupBtn).removeClass("loadingButton"));e.waitForRegister=!1},error:function(){displayError(),e.waitForRegister=!1}})}},shopifyLogin:function(e,t,n){return n()},formSignIn:function(){var e=$("#pageWrapper").find(".login-form"),t=this,n={email:e.find("input[name=email]").val(),password:e.find("input[name=password]").val()},r=getAnonymousTokenFromLocalStorage(),o=server+this.ajax.sign_in;$.ajax({url:o,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(n)),headers:{"Anonymous-Token":r},success:function(r){if(r.success)r.shopify?t.shopifyLogin(n.email,n.password,function(){t.$els.loginBtn.nowLoading("stop"),$(".js-form-login-btn").nowLoading("stop"),window.location.replace(clientURL+"/"+(r.redirect?r.redirect:""))}):(t.$els.loginBtn.nowLoading("stop"),$(".js-form-login-btn").nowLoading("stop"),window.location.replace(clientURL+"/"+(r.redirect?r.redirect:"")));else if(t.$els.loginBtn.nowLoading("stop"),$(".js-form-login-btn").nowLoading("stop"),$.isArray(r.errors)){var o=$(".js-errors-wrapper-holder").find(".js-original-signin-error-wrapper").clone();0===e.find(".pass-input-wrapper").last().find(".js-signin-error-wrapper").length&&(o.removeClass("js-original-signin-error-wrapper").addClass("js-signin-error-wrapper"),o.appendTo(e.find(".pass-input-wrapper").last())),displayError(r.errors,void 0,e.find(".js-signin-error-msg"))}},error:function(){displayError()}})},signin:function(){var e=this.$forms.signInForm,t=this,n={email:e.find("input[name=email]").val(),password:e.find("input[name=password]").val()};this.registerInCourse&&(n.registerInCourse=this.registerInCourse);var r=server+this.ajax.sign_in;$(".js-form-enterkey").find(".js-original-signin-error-wrapper").length&&$(".js-form-enterkey").find(".js-original-signin-error-wrapper").hide();var o=getAnonymousTokenFromLocalStorage();$.ajax({url:r,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(n)),headers:{"Anonymous-Token":o},success:function(r){if(r.success){if(t.courseRegister){var o=window.location.href.indexOf("?")>-1?"&register=true":"?register=true";r.redirect=(window.location.href+o).replace(window.location.origin+"/","")}r.shopify?t.shopifyLogin(n.email,n.password,function(){t.$els.loginBtn.nowLoading("stop"),window.location.replace(clientURL+"/"+(r.redirect?r.redirect:""))}):l_settings.redirectUrl?window.location.replace(l_settings.redirectUrl):"/payment"===window.location.pathname?window.location.reload():(t.$els.loginBtn.nowLoading("stop"),window.location.replace(clientURL+"/"+(r.redirect?r.redirect:"")))}else if(t.$els.loginBtn.nowLoading("stop"),$.isArray(r.errors)){var i=$(".js-errors-wrapper-holder").find(".js-original-signin-error-wrapper").clone();e.find(".js-signin-error-wrapper").remove(),i.removeClass("js-original-signin-error-wrapper").addClass("js-signin-error-wrapper"),i.appendTo(e.find(".pass-input-wrapper").last()),displayError(r.errors,void 0,e.find(".js-signin-error-msg"))}},error:function(){displayError()}})},passwordResetInit:function(){var e=this.$forms.resetPasswordInit,t=this,n=e.find("input[name=email]").val(),r={email:n},o=server+this.ajax.password_reset_init;$.ajax({url:o,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(r)),success:function(r){if($("."+t.cssClass.resetPasswordBtn).nowLoading("stop"),r.success)showAnimatedMessage("ok",LWTranslate.get("common.reset_password").replace("{email}",n),void 0,!0);else if($.isArray(r.errors)){var o=$(".js-errors-wrapper-holder").find(".js-original-reset-pass-error-wrapper").clone();e.find(".js-reset-pass-error-wrapper").remove(),o.removeClass("js-original-reset-pass-error-wrapper").addClass("js-reset-pass-error-wrapper"),o.appendTo(e.find(".email-input-wrapper")),displayError(r.errors,void 0,e.find(".js-reset-pass-error-msg"))}},error:function(){displayError()}})},passwordReset:function(){var e=this,t=this.$forms.resetPassword,n={password:t.find("input[name=password]").val(),password2:t.find("input[name=password2]").val(),activation:this.pwdrst};$("."+this.cssClass.resetPasswordFormBtn).nowLoading("start"),$("."+this.cssClass.resetPasswordFormBtn).off("click");var r=server+this.ajax.password_reset;$.ajax({url:r,async:!0,type:"POST",dataType:"json",data:"data="+encodeURIComponent(JSON.stringify(n)),success:function(n){if(n.success)$("."+e.cssClass.resetPasswordFormBtn).nowLoading("stop"),showAnimatedMessage("ok",LWTranslate.get("common.reset_password_ok")),void 0!==n.logged_in&&n.logged_in&&(window.location.href="/");else if($.isArray(n.errors)){$("."+e.cssClass.resetPasswordFormBtn).nowLoading("stop"),$("."+e.cssClass.resetPasswordFormBtn).off("click").on("click",function(){e.passwordReset()});var r=$(".js-errors-wrapper-holder").find(".js-original-new-pass-error-wrapper").clone();t.find(".js-new-pass-error-wrapper").remove(),r.removeClass("js-original-new-pass-error-wrapper").addClass("js-new-pass-error-wrapper"),r.appendTo(t.find(".pass-input-wrapper").last()),e.$forms.resetPassword.find(".js-new-pass-error-msg").show(),displayError(n.errors,void 0,t.find(".js-new-pass-error-msg"))}},error:function(){$("."+e.cssClass.resetPasswordFormBtn).nowLoading("stop"),$("."+e.cssClass.resetPasswordFormBtn).off("click").on("click",function(){e.passwordReset()}),displayError()}})}},$(document).ready(function(){return"undefined"!=typeof DP_SETTINGS&&"disabled"!=DP_SETTINGS.type&&(!("custom"==DP_SETTINGS.type&&!DP_SETTINGS.marketing)&&(!!("euonly"!=DP_SETTINGS.type||"undefined"!=typeof DP_EU&&DP_EU)&&void $(".lnd-temp-2-24-wrapper, .lnd-temp-2-107-wrapper ").each(function(){var e,t=$("<div>").html('<label ><input type="checkbox" class="js-email-register-marketing-checkbox -marketing-opt-in-checkbox js-non-editable" name="js-email-register-marketing-checkbox"><span class="-marketing-opt-in-checkbox-lbl"></span></label><p class="-marketing-opt-in-checkbox-txt js-non-editable">'+LWTranslate.get("common.lead_optin")+"</p>").addClass("js-email-register-marketing-control -marketing-control");"undefined"!=typeof authoringMode&&(t.find(".-marketing-opt-in-checkbox-lbl").css({cursor:"not-allowed"}),t.find('input[type="checkbox"]').prop("disabled","disabled")),$(this).find(".js-email-register-marketing").length?(e=$(this).find(".js-email-register-marketing")).append(t):((e=$("<div>").addClass("js-email-register-marketing js-removeOnSave js-non-editable")).append(t),e.insertAfter($(this).find(".js-email-register-btn"))),"undefined"!=typeof authoringMode&&e.append('<div class="lnd-temp-2-24-change-txt js-non-editable">Do you want to change the checkbox text? Click <a href="/author/translations?category=common" class="js-non-editable" target="_blank">here</a>.</div>')})))}),$(document).ready(function(){0!=document.location.pathname.indexOf("/author/pageseditor")&&($(".js-email-register-btn").off("click").on("click",function(e){var t=$(this),n={};if(n.email=t.siblings().find('input[type="e-mail"]').val(),t.siblings().find("input.js-email-register-marketing-checkbox").length&&(n.optin=!!t.siblings().find("input.js-email-register-marketing-checkbox:checked").length),"undefined"!=typeof DP_EU&&(n.eu_customer=DP_EU),n.email.length){var r=$(this).closest(".js-email-register").attr("data-tag");r=r?"/"+r:"",$.ajax({url:server+"emails"+r,async:!1,type:"POST",dataType:"json",data:"data="+JSON.stringify(n),success:function(e){e.success?(t.parent(".js-email-register").hide(),t.parent().siblings(".js-email-register-msg").show()):displayError(e.errors)},error:function(){displayError()}})}else showMessage("alert",LWTranslate.get("common.missing"),LWTranslate.get("common.fill_email"),[{name:"OK"}])}),$(".js-video-btn").off().on("click",function(){var e=$(this).attr("data-href");e&&$.fancybox({padding:0,href:e,title:"",transitionIn:"elastic",transitionOut:"elastic",type:"iframe"})}),$(".js-contact-form-btn").off("click").on("click",function(e){var t={},n=!0;$.each($(".js-contact-form [name]"),function(e,r){var o=$(r),i=o.attr("name");t[i]=o.val(),o.hasClass("optional")||o.val().length||(n=!1)}),n?$.ajax({url:server+"contact",async:!1,type:"POST",dataType:"json",data:"data="+JSON.stringify(t),success:function(e){e.success?($(".js-contact-form").hide(),$(".js-contact-form-msg").show()):displayError(e.errors)},error:function(){displayError()}}):showMessage("alert",LWTranslate.get("common.missing"),LWTranslate.get("common.fill_required"),[{name:"OK"}])}))});
